<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>To Do List</title>

   
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <style>

        .col-centered{
            float: none;
            width: 60%;
            margin: 0 auto;
        }
    </style>


    <script>


 
 	$(document).ready( function(){

 		var today = new Date();  //  d.setDate( d.getDate() + 1 ) // tommorrow's date

        //remove the GMT part from date
        todayDateStr = String(today).split(' ').slice(0,4).join(' ');

        // Display today's date at the top
        $("#dateDisp").text(todayDateStr)


        // Display dates of yesterday, today and tomorrow as the top row of three columns respectively



        var todayDateAsHeading = "<li id = \"todayDateLi\" class=\"list-group-item\">"+todayDateStr+"</li>";

        $("#todayListGroup").append(todayDateAsHeading)

        var dateToQueryTasks = "2015-"+today.getMonth()+"-"+today.getDate();
            $.ajax({
                type: "POST",
                url: "data.php",
                data: { 'taskDate': dateToQueryTasks, 'queryType':'select'},
                cache: false,
                success: function(data, status)
                    {
                        if (status =='success' && data != '')
                        {
                            $("#todayListGroup").append(data);
                        }
                        else
                        {
                             alert("Data: " + data + "\nStatus: " + status);
                        }
                    }
                });


        var yesterday = new Date()
        yesterday.setDate( yesterday.getDate() - 1 )
        yesterdayDateStr = String(yesterday).split(' ').slice(0,4).join(' ');
        

        var yestDateAsHeading = "<li id = \"yestDateLi\"  class=\"list-group-item\">"+yesterdayDateStr+"</li>";

        $("#yestListGroup").append(yestDateAsHeading)

        // dateToQueryTasks = "2015-"+yesterday.getMonth()+"-"+yesterday.getDate();
        //     $.ajax({
        //         type: "GET",
        //         url: "data.php",
        //         data: { 'dateToQueryTasks': dateToQueryTasks, 'listId':'yestDateLi'},
        //         cache: false,
        //         success: function(data, status)
        //             {
        //                 if (status =='success' && data != '')
        //                 {
        //                     $("#yestListGroup").append(data);
        //                 }
        //                 else
        //                 {
        //                      alert("Data: " + data + "\nStatus: " + status);
        //                 }
        //             }
        //         });

        var tommorrow = new Date();
        tommorrow.setDate( tommorrow.getDate() + 1 );
        tommorrowDateStr = String(tommorrow).split(' ').slice(0,4).join(' ');
        
              

        var tommDateAsHeading = "<li id = \"tommDateLi\" class=\"list-group-item\">"+tommorrowDateStr+"</li>"

        $("#tommListGroup").append(tommDateAsHeading)

        // dateToQueryTasks = "2015-"+tommorrow.getMonth()+"-"+tommorrow.getDate();
        //     $.ajax({
        //         type: "GET",
        //         url: "data.php",
        //         data: { 'dateToQueryTasks': dateToQueryTasks, 'listId':'tommDateLi'},
        //         cache: false,
        //         success: function(data, status)
        //             {
        //                 if (status =='success' && data != '')
        //                 {
        //                     $("#tommListGroup").append(data);
        //                 }
        //                 else
        //                 {
        //                      alert("Data: " + data + "\nStatus: " + status);
        //                 }
        //             }
        //         });

		

 		$("#addTaskBtn").click(function(){

 				var task = $("#inputTask").val()

                if (task != "")
                {

                    var dateToAddInDB = "2015-"+today.getMonth()+"-"+today.getDate();
                 

                    $.ajax({
                        type: "POST",
                        url: "data.php",
                        data: { 'taskDate': dateToAddInDB, 'taskName':task,'taskType' : "None"},
                        cache: false,
                        success: function(data, status)
                            {
                                alert("Data: " + data + "\nStatus: " + status);
                            }
                        });

                    /*Add the task as a list item*/
     				var taskInList = "<li class=\"list-group-item\">"+task+"</li>"

     				$("#todayListGroup").append(taskInList)
                }
 			
 		})

        $("#leftScroll").click(function(){


            today.setDate(today.getDate()-1)
            //remove the GMT part from date
            todayDateStr = String(today).split(' ').slice(0,4).join(' ');

            // Display today's date at the top
            $("#dateDisp").text(todayDateStr)


            /*Updating Today Column*/

            //Clear the child elements of the list
            $("#todayListGroup").empty()


            //Set the date again as a row in the list
            var todayDateAsHeading = "<li id = \"todayDateLi\" class=\"list-group-item\">"+todayDateStr+"</li>";

            $("#todayListGroup").append(todayDateAsHeading)



            var dateToQueryTasks = "2015-"+today.getMonth()+"-"+today.getDate();
            $.ajax({
                type: "GET",
                url: "data.php",
                data: { 'dateToQueryTasks': dateToQueryTasks, 'listId':'todayDateLi'},
                cache: false,
                success: function(data, status)
                    {
                        if (status =='success' && data != '')
                        {
                            $("#todayListGroup").append(data);
                        }
                        else
                        {
                             alert("Data: " + data + "\nStatus: " + status);
                        }
                    }
                });

            /*Updating Yesterday Column*/

            yesterday.setDate( yesterday.getDate() - 1 )
            yesterdayDateStr = String(yesterday).split(' ').slice(0,4).join(' ');
            

            //Clear the child elements of the list
            $("#yestListGroup").empty()


            //Set the date again as a row in the list
            var yestDateAsHeading = "<li id = \"yestDateLi\" class=\"list-group-item\">"+yesterdayDateStr+"</li>";

            $("#yestListGroup").append(yestDateAsHeading)


            var dateToQueryTasks = "2015-"+yesterday.getMonth()+"-"+yesterday.getDate();
            $.ajax({
                type: "GET",
                url: "data.php",
                data: { 'dateToQueryTasks': dateToQueryTasks, 'listId':'yestDateLi'},
                cache: false,
                success: function(data, status)
                    {
                        if (status =='success' && data != '')
                        {
                            $("#yestListGroup").append(data);
                        }
                        else
                        {
                             alert("Data: " + data + "\nStatus: " + status);
                        }
                    }
                });

            /*Updating Tommorow Column*/
            
            tommorrow.setDate( tommorrow.getDate() - 1 );
            tommorrowDateStr = String(tommorrow).split(' ').slice(0,4).join(' ');
            
    
            //Clear the child elements of the list
            $("#tommListGroup").empty()


            //Set the date again as a row in the list
            var tommDateAsHeading = "<li id = \"tommDateLi\" class=\"list-group-item\">"+tommorrowDateStr+"</li>";

            $("#tommListGroup").append(tommDateAsHeading)



             var dateToQueryTasks = "2015-"+tommorrow.getMonth()+"-"+tommorrow.getDate();
            $.ajax({
                type: "GET",
                url: "data.php",
                data: { 'dateToQueryTasks': dateToQueryTasks, 'listId':'tommDateLi'},
                cache: false,
                success: function(data, status)
                    {
                        if (status =='success' && data != '')
                        {
                            $("#tommListGroup").append(data);
                        }
                        else
                        {
                             alert("Data: " + data + "\nStatus: " + status);
                        }
                    }
                });




        })


        $("#rightScroll").click(function(){


            today.setDate(today.getDate()+1)
            //remove the GMT part from date
            todayDateStr = String(today).split(' ').slice(0,4).join(' ');

            // Display today's date at the top
            $("#dateDisp").text(todayDateStr)


            // Display dates of yesterday, today and tomorrow as the top row of three columns respectively


            $("#todayDateLi").text(todayDateStr)


            yesterday.setDate( yesterday.getDate() + 1 )
            yesterdayDateStr = String(yesterday).split(' ').slice(0,4).join(' ');
            

        

            $("#yestDateLi").text(yesterdayDateStr)

            
            tommorrow.setDate( tommorrow.getDate() + 1 );
            tommorrowDateStr = String(tommorrow).split(' ').slice(0,4).join(' ');
            
     

            $("#tommDateLi").text(tommorrowDateStr)


            


        })
 		
 	})
    
 
    </script>
</head>
<body>
 

    <div class = "row">
        <div class = "col-md-12 col-centered">
            <h2>Manage Tasks By Date</h2>  
             <hr>
        </div>
    </div>
    <br>

    <div class = "row">
        <div class="col-md-2 ">
            <h4>Date to Add task</h4>
        </div>
    </div>

    <div class = "row">

        <div class="col-md-1">

            <input id = "leftScroll" type = "image" src = "left-arrow.png"> </input>
        </div>

        <div class="col-md-1">
            <h4 id = "dateDisp"> </h4>
        </div>

        <div class="col-md-1">
            <input id = "rightScroll" type = "image" src = "right-arrow.png"></input>
        </div>
    </div>

    <br>
    <button id = "addTaskBtn"> Add Task</button>
    <input id = "inputTask" ></input> 


    <!-- Div to show tasks per date -->
    <div class="row">
    <div  id = "div1" class="col-md-4" style="background-color:lavender;">

         <ul id = "yestListGroup" class="list-group">
            
        </ul>
    	

    </div>

    <div id = "div2" class="col-md-4" style="background-color:lavenderblush;">

        <ul id = "todayListGroup" class="list-group">
            
        </ul>

    </div>

    <div id = "div3" class="col-md-4" style="background-color:lavender;">


         <ul id = "tommListGroup" class="list-group">
            
        </ul>

    </div>
   </div>


</body>
</html> 